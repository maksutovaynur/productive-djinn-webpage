import{_ as f,o as r,c as o,a as u,w as c,n as m,d as S,F as h,r as g,p,b as v,e as y}from"./index-68d3ee50.js";class d{constructor(t,a){this.x=t,this.y=a}diag(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}}class _{constructor(t,a){this.center=t,this.halfSize=a}}const x={props:{id:{type:[String,Number],default:0},title:{type:String,default:"Some Title"},radius:{type:Number,default:1},rotation:{type:Number,default:0},angle:{type:Number,default:90},space:{type:String,default:"1rem"},color:{type:String,default:"#af0000"}},data(){return{resizeStartRel:new d(0,0)}},mounted(){console.log(`Created sector ${this.title} with radiusScale=${this.radius}`)},methods:{onClick(){console.log(`clicked Element '${this.title}'`)},onDragStart(e){this.resizeStartRel=this.getRelativePosition(e.clientX,e.clientY);let t=this.resizeStartRel.diag();console.log(`dragstart: x=${this.resizeStartRel.x}, y=${this.resizeStartRel.y}, r=${t}`)},onDragEnd(e){let t=this.getRelativePosition(e.clientX,e.clientY),a=this.resizeStartRel.diag(),l=t.diag();a<.1&&(a=.1);const n=this.id;console.log(`dragend: ${t}, ${a} => ${l}, key=${String(n)}`),this.$emit("update-radius",n,l/a*this.radius)},onDragMove(e){this.onDragEnd(e)},centeredRect(){let e=this.$el.getBoundingClientRect();return new _(new d((e.left+e.right)/2,(e.top+e.bottom)/2),new d((e.right-e.left)/2,(e.bottom-e.top)/2))},getRelativePosition(e,t){let a=this.centeredRect();const l=new d((e-a.center.x)/a.halfSize.x,(t-a.center.y)/a.halfSize.y);return console.log(`Client[${e}, ${t}], 
Rect Center[${a.center.x}, ${a.center.y}], 
Rect Size[${a.halfSize.x}, ${a.halfSize.y}],
Rel[${l.x}, ${l.y}]`),l}},computed:{halfTan(){return Math.tan(Math.PI*this.angle/360)},halfSin(){return Math.sin(Math.PI*this.angle/360)}}};const R={class:"wheel-segment"};function V(e,t,a,l,n,i){return r(),o("div",R,[u("div",{class:"outer",style:m({"--radius":a.radius*50+"%","--rotation":a.rotation,"--space":a.space,"--half-sin":i.halfSin,"--half-tan":i.halfTan,"--color":a.color})},[u("div",{class:"inner",onClick:t[0]||(t[0]=(...s)=>i.onClick&&i.onClick(...s)),onDragstart:t[1]||(t[1]=(...s)=>i.onDragStart&&i.onDragStart(...s)),onDragend:t[2]||(t[2]=(...s)=>i.onDragEnd&&i.onDragEnd(...s)),onDrag:t[3]||(t[3]=(...s)=>i.onDragMove&&i.onDragMove(...s)),onDragover:t[4]||(t[4]=c(()=>{},["prevent"])),onDragenter:t[5]||(t[5]=c(()=>{},["prevent"]))},null,32)],4)])}const w=f(x,[["render",V],["__scopeId","data-v-628f829e"]]),$=e=>(p("data-v-7607cfb4"),e=e(),v(),e),D={class:"wheel"},k=$(()=>u("h1",null,"The Wheel of Balance",-1)),M={class:"outer"},z={class:"inner"};function C(){return"#"+((1<<24)*Math.random()|0).toString(16).padStart(6,"0")}class b{constructor(t,a=1,l="Default Title",n="#112299"){this.id=t,this.value=a,this.title=l,this.color=n}}const E={props:{maxValue:{default:10},minValue:{default:1},valueStep:{default:1},space:{type:String,default:"0.5rem"},minValueShift:{default:0}},data(){return{items:[1,2,3,4,5].map(function(e){return new b(e,6+4*Math.random(),`El #${e}`,C())})}},created(){this.items.forEach(e=>{this.scaleRadius(e.id,e.value/this.maxValue)})},computed:{nitems(){return this.items.length},angle(){return 360/this.nitems},axisTicks(){let e=[];for(let t=this.minValue;t<this.maxValue;t+=this.valueStep)e.push(t);return e}},methods:{scaleRadius(e,t){if(console.log(`Scale event: scale=${t}, elem=${e}`),!e)return;let a=this.items.map(n=>n.id).indexOf(e),l=t*this.maxValue-this.minValueShift;l<this.minValue&&(l=this.minValue),l>this.maxValue&&(l=this.maxValue),this.valueStep&&(l=this.maxValue-this.valueStep*Math.floor((this.maxValue-l)/this.valueStep)),console.log(`Scale event: scale=${t}, elem=${e}, newValue=${l}`),this.items[a].value=l}}},I=S({...E,__name:"Wheel",setup(e){return(t,a)=>(r(),o("div",D,[k,u("div",M,[u("div",z,[(r(!0),o(h,null,g(t.items,(l,n)=>(r(),y(w,{key:l.id,class:"wheel-segment",onUpdateRadius:t.scaleRadius,id:l.id,rotation:t.angle*n,angle:t.angle,space:e.space,radius:(l.value+e.minValueShift)/e.maxValue,title:l.title,color:l.color},null,8,["onUpdateRadius","id","rotation","angle","space","radius","title","color"]))),128)),(r(!0),o(h,null,g(t.axisTicks,l=>(r(),o("div",{key:l,class:"wheel-segment overlay",style:m({"--value":l+e.minValueShift,"--max-value":e.maxValue})},null,4))),128))])])]))}});const W=f(I,[["__scopeId","data-v-7607cfb4"]]);export{W as default};
